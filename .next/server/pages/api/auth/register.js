"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/auth/register";
exports.ids = ["pages/api/auth/register"];
exports.modules = {

/***/ "bcryptjs":
/*!***************************!*\
  !*** external "bcryptjs" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("bcryptjs");

/***/ }),

/***/ "cors":
/*!***********************!*\
  !*** external "cors" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("cors");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "sequelize":
/*!****************************!*\
  !*** external "sequelize" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("sequelize");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fregister&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fauth%2Fregister.js&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fregister&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fauth%2Fregister.js&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_auth_register_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/auth/register.js */ \"(api)/./pages/api/auth/register.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_auth_register_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_auth_register_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/auth/register\",\n        pathname: \"/api/auth/register\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_auth_register_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmF1dGglMkZyZWdpc3RlciZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGYXBpJTJGYXV0aCUyRnJlZ2lzdGVyLmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ3lEO0FBQ3pEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyx3REFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsd0RBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGxhbm5lci8/ZDM1MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXMvYXBpL2F1dGgvcmVnaXN0ZXIuanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hdXRoL3JlZ2lzdGVyXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYXV0aC9yZWdpc3RlclwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fregister&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fauth%2Fregister.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./config/db.js":
/*!**********************!*\
  !*** ./config/db.js ***!
  \**********************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("// config/db.js\n\nconst { Sequelize } = __webpack_require__(/*! sequelize */ \"sequelize\");\n// Database connection\nconst sequelize = new Sequelize(\"postgres://Sthwalo:LeeZee1823%21@localhost:5432/plannerdb\", {\n    dialect: \"postgres\",\n    logging: console.log\n});\n// Test connection\nconst connectDB = async ()=>{\n    try {\n        await sequelize.authenticate();\n        console.log(\"Database connected successfully.\");\n    } catch (error) {\n        console.error(\"Unable to connect to the database:\", error);\n    }\n};\n// config/db.js\nconst syncModels = async ()=>{\n    try {\n        await sequelize.sync({\n            alter: true\n        }); // Use alter: true to update the schema\n        console.log(\"All models were synchronized successfully.\");\n    } catch (error) {\n        console.error(\"Error synchronizing models:\", error);\n    }\n};\nmodule.exports = {\n    sequelize,\n    connectDB,\n    syncModels\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9jb25maWcvZGIuanMiLCJtYXBwaW5ncyI6IkFBQUEsZUFBZTs7QUFDZixNQUFNLEVBQUVBLFNBQVMsRUFBRSxHQUFHQyxtQkFBT0EsQ0FBQztBQUU5QixzQkFBc0I7QUFDdEIsTUFBTUMsWUFBWSxJQUFJRixVQUFVRywyREFBd0IsRUFBRTtJQUN4REcsU0FBUztJQUNUQyxTQUFTQyxRQUFRQyxHQUFHO0FBQ3RCO0FBRUEsa0JBQWtCO0FBQ2xCLE1BQU1DLFlBQVk7SUFDaEIsSUFBSTtRQUNGLE1BQU1SLFVBQVVTLFlBQVk7UUFDNUJILFFBQVFDLEdBQUcsQ0FBQztJQUNkLEVBQUUsT0FBT0csT0FBTztRQUNkSixRQUFRSSxLQUFLLENBQUMsc0NBQXNDQTtJQUN0RDtBQUNGO0FBRUEsZUFBZTtBQUNmLE1BQU1DLGFBQWE7SUFDZixJQUFJO1FBQ0YsTUFBTVgsVUFBVVksSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBSyxJQUFJLHVDQUF1QztRQUM5RVAsUUFBUUMsR0FBRyxDQUFDO0lBQ2QsRUFBRSxPQUFPRyxPQUFPO1FBQ2RKLFFBQVFJLEtBQUssQ0FBQywrQkFBK0JBO0lBQy9DO0FBQ0Y7QUFFQUksT0FBT0MsT0FBTyxHQUFHO0lBQUVmO0lBQVdRO0lBQVdHO0FBQVkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbGFubmVyLy4vY29uZmlnL2RiLmpzP2I0OTMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gY29uZmlnL2RiLmpzXG5jb25zdCB7IFNlcXVlbGl6ZSB9ID0gcmVxdWlyZSgnc2VxdWVsaXplJyk7XG5cbi8vIERhdGFiYXNlIGNvbm5lY3Rpb25cbmNvbnN0IHNlcXVlbGl6ZSA9IG5ldyBTZXF1ZWxpemUocHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMLCB7XG4gIGRpYWxlY3Q6ICdwb3N0Z3JlcycsXG4gIGxvZ2dpbmc6IGNvbnNvbGUubG9nLCAvLyBTZXQgdG8gdHJ1ZSB0byBzZWUgU1FMIHF1ZXJpZXMgaW4gdGhlIGNvbnNvbGVcbn0pO1xuXG4vLyBUZXN0IGNvbm5lY3Rpb25cbmNvbnN0IGNvbm5lY3REQiA9IGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICBhd2FpdCBzZXF1ZWxpemUuYXV0aGVudGljYXRlKCk7XG4gICAgY29uc29sZS5sb2coJ0RhdGFiYXNlIGNvbm5lY3RlZCBzdWNjZXNzZnVsbHkuJyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignVW5hYmxlIHRvIGNvbm5lY3QgdG8gdGhlIGRhdGFiYXNlOicsIGVycm9yKTtcbiAgfVxufTtcblxuLy8gY29uZmlnL2RiLmpzXG5jb25zdCBzeW5jTW9kZWxzID0gYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBzZXF1ZWxpemUuc3luYyh7IGFsdGVyOiB0cnVlIH0pOyAvLyBVc2UgYWx0ZXI6IHRydWUgdG8gdXBkYXRlIHRoZSBzY2hlbWFcbiAgICAgIGNvbnNvbGUubG9nKCdBbGwgbW9kZWxzIHdlcmUgc3luY2hyb25pemVkIHN1Y2Nlc3NmdWxseS4nKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc3luY2hyb25pemluZyBtb2RlbHM6JywgZXJyb3IpO1xuICAgIH1cbiAgfTtcbiAgXG4gIG1vZHVsZS5leHBvcnRzID0geyBzZXF1ZWxpemUsIGNvbm5lY3REQiwgc3luY01vZGVscywgfTtcbiJdLCJuYW1lcyI6WyJTZXF1ZWxpemUiLCJyZXF1aXJlIiwic2VxdWVsaXplIiwicHJvY2VzcyIsImVudiIsIkRBVEFCQVNFX1VSTCIsImRpYWxlY3QiLCJsb2dnaW5nIiwiY29uc29sZSIsImxvZyIsImNvbm5lY3REQiIsImF1dGhlbnRpY2F0ZSIsImVycm9yIiwic3luY01vZGVscyIsInN5bmMiLCJhbHRlciIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./config/db.js\n");

/***/ }),

/***/ "(api)/./models/User.js":
/*!************************!*\
  !*** ./models/User.js ***!
  \************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("// models/User.js\n\nconst { DataTypes } = __webpack_require__(/*! sequelize */ \"sequelize\");\nconst { sequelize } = __webpack_require__(/*! ../config/db */ \"(api)/./config/db.js\");\nconst User = sequelize.define(\"User\", {\n    username: {\n        type: DataTypes.STRING,\n        allowNull: false,\n        unique: true\n    },\n    password: {\n        type: DataTypes.STRING,\n        allowNull: false\n    }\n});\nmodule.exports = User;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9tb2RlbHMvVXNlci5qcyIsIm1hcHBpbmdzIjoiQUFBQSxpQkFBaUI7O0FBQ2pCLE1BQU0sRUFBRUEsU0FBUyxFQUFFLEdBQUdDLG1CQUFPQSxDQUFDO0FBQzlCLE1BQU0sRUFBRUMsU0FBUyxFQUFFLEdBQUdELG1CQUFPQSxDQUFDO0FBRTlCLE1BQU1FLE9BQU9ELFVBQVVFLE1BQU0sQ0FBQyxRQUFRO0lBQ3BDQyxVQUFVO1FBQ1JDLE1BQU1OLFVBQVVPLE1BQU07UUFDdEJDLFdBQVc7UUFDWEMsUUFBUTtJQUNWO0lBQ0FDLFVBQVU7UUFDUkosTUFBTU4sVUFBVU8sTUFBTTtRQUN0QkMsV0FBVztJQUNiO0FBQ0Y7QUFFQUcsT0FBT0MsT0FBTyxHQUFHVCIsInNvdXJjZXMiOlsid2VicGFjazovL3BsYW5uZXIvLi9tb2RlbHMvVXNlci5qcz83MzY3Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIG1vZGVscy9Vc2VyLmpzXG5jb25zdCB7IERhdGFUeXBlcyB9ID0gcmVxdWlyZSgnc2VxdWVsaXplJyk7XG5jb25zdCB7IHNlcXVlbGl6ZSB9ID0gcmVxdWlyZSgnLi4vY29uZmlnL2RiJyk7XG5cbmNvbnN0IFVzZXIgPSBzZXF1ZWxpemUuZGVmaW5lKCdVc2VyJywge1xuICB1c2VybmFtZToge1xuICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICB1bmlxdWU6IHRydWUsXG4gIH0sXG4gIHBhc3N3b3JkOiB7XG4gICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICBhbGxvd051bGw6IGZhbHNlLFxuICB9LFxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gVXNlcjsiXSwibmFtZXMiOlsiRGF0YVR5cGVzIiwicmVxdWlyZSIsInNlcXVlbGl6ZSIsIlVzZXIiLCJkZWZpbmUiLCJ1c2VybmFtZSIsInR5cGUiLCJTVFJJTkciLCJhbGxvd051bGwiLCJ1bmlxdWUiLCJwYXNzd29yZCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./models/User.js\n");

/***/ }),

/***/ "(api)/./pages/api/auth/register.js":
/*!************************************!*\
  !*** ./pages/api/auth/register.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var cors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cors */ \"cors\");\n/* harmony import */ var cors__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(cors__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _config_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../config/db */ \"(api)/./config/db.js\");\n/* harmony import */ var _config_db__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_config_db__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _models_User__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../models/User */ \"(api)/./models/User.js\");\n/* harmony import */ var _models_User__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_models_User__WEBPACK_IMPORTED_MODULE_4__);\n/* import cors from 'cors';\nimport { default as nextConnect } from 'next-connect'; // Named import to avoid Webpack issue\nimport { connectDB, syncModels } from '../../../config/db';\nimport bcrypt from 'bcryptjs';\nimport jwt from 'jsonwebtoken';\nimport User from '../../../models/User';\n\nconst handler = nextConnect();\nhandler.use(cors()); // Use CORS middleware\nconst jwtSecret = process.env.JWT_SECRET || 'your-default-secret'; \n\nhandler.post(async (req, res) => {\n  try {\n    // Log JWT Secret to check if it's correctly loaded\n    console.log('JWT Secret:', process.env.JWT_SECRET);\n\n    // Test the database connection and synchronize models\n    await connectDB(); // Ensure the database is reachable\n    await syncModels(); // Synchronize the models (create tables if they do not exist)\n\n    const { username, password } = req.body;\n    console.log('Received request:', req.body);\n\n    if (!username || !password) {\n      return res.status(400).json({ message: 'All fields are required.' });\n    }\n\n    const existingUser = await User.findOne({ where: { username } });\n    if (existingUser) {\n      return res.status(400).json({ message: 'User already exists.' });\n    }\n\n    // Hash the password using bcrypt\n    const hashedPassword = await bcrypt.hash(password, 10);\n    const newUser = await User.create({ username, password: hashedPassword });\n\n    // Generate JWT token for the new user\n    const token = jwt.sign({ id: newUser.id, username: newUser.username }, process.env.JWT_SECRET, {\n      expiresIn: '1h', // Token expires in 1 hour\n    });\n\n    return res.status(201).json({ message: 'User registered successfully', token });\n  } catch (error) {\n    console.error('Error during registration:', error);\n    return res.status(500).json({ message: 'Internal server error' });\n  }\n});\n\nexport default handler; \n\n */ \n\n\n\n\n// CORS middleware\nconst corsMiddleware = cors__WEBPACK_IMPORTED_MODULE_0___default()();\nasync function handler(req, res) {\n    try {\n        // Handle the CORS middleware\n        await new Promise((resolve, reject)=>{\n            corsMiddleware(req, res, (result)=>{\n                if (result instanceof Error) {\n                    return reject(result);\n                }\n                resolve(result);\n            });\n        });\n        // Only handle POST requests\n        if (req.method !== \"POST\") {\n            return res.status(405).json({\n                message: \"Method Not Allowed\"\n            });\n        }\n        // Log JWT Secret to check if it's correctly loaded\n        console.log(\"JWT Secret:\", \"zSPZtDI2KNCGbgeInwSURokulVVzCAiRQEj0DBZXMjE=\");\n        // Test the database connection and synchronize models\n        await (0,_config_db__WEBPACK_IMPORTED_MODULE_1__.connectDB)(); // Ensure the database is reachable\n        await (0,_config_db__WEBPACK_IMPORTED_MODULE_1__.syncModels)(); // Synchronize the models (create tables if they do not exist)\n        const { username, password } = req.body;\n        console.log(\"Received request:\", req.body);\n        if (!username || !password) {\n            return res.status(400).json({\n                message: \"All fields are required.\"\n            });\n        }\n        const existingUser = await _models_User__WEBPACK_IMPORTED_MODULE_4___default().findOne({\n            where: {\n                username\n            }\n        });\n        if (existingUser) {\n            return res.status(400).json({\n                message: \"User already exists.\"\n            });\n        }\n        // Hash the password using bcrypt\n        const hashedPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_2___default().hash(password, 10);\n        const newUser = await _models_User__WEBPACK_IMPORTED_MODULE_4___default().create({\n            username,\n            password: hashedPassword\n        });\n        // Generate JWT token for the new user\n        const token = jsonwebtoken__WEBPACK_IMPORTED_MODULE_3___default().sign({\n            id: newUser.id,\n            username: newUser.username\n        }, \"zSPZtDI2KNCGbgeInwSURokulVVzCAiRQEj0DBZXMjE=\", {\n            expiresIn: \"1h\"\n        });\n        return res.status(201).json({\n            message: \"User registered successfully\",\n            token\n        });\n    } catch (error) {\n        console.error(\"Error during registration:\", error);\n        return res.status(500).json({\n            message: \"Internal server error\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvYXV0aC9yZWdpc3Rlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQWtEQyxHQUN1QjtBQUNtQztBQUM3QjtBQUNDO0FBQ1M7QUFFeEMsa0JBQWtCO0FBQ2xCLE1BQU1NLGlCQUFpQk4sMkNBQUlBO0FBRVosZUFBZU8sUUFBUUMsR0FBRyxFQUFFQyxHQUFHO0lBQzVDLElBQUk7UUFDRiw2QkFBNkI7UUFDN0IsTUFBTSxJQUFJQyxRQUFRLENBQUNDLFNBQVNDO1lBQzFCTixlQUFlRSxLQUFLQyxLQUFLLENBQUNJO2dCQUN4QixJQUFJQSxrQkFBa0JDLE9BQU87b0JBQzNCLE9BQU9GLE9BQU9DO2dCQUNoQjtnQkFDQUYsUUFBUUU7WUFDVjtRQUNGO1FBRUEsNEJBQTRCO1FBQzVCLElBQUlMLElBQUlPLE1BQU0sS0FBSyxRQUFRO1lBQ3pCLE9BQU9OLElBQUlPLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLFNBQVM7WUFBcUI7UUFDOUQ7UUFFQSxtREFBbUQ7UUFDbkRDLFFBQVFDLEdBQUcsQ0FBQyxlQUFlQyw4Q0FBc0I7UUFFakQsc0RBQXNEO1FBQ3RELE1BQU1wQixxREFBU0EsSUFBSSxtQ0FBbUM7UUFDdEQsTUFBTUMsc0RBQVVBLElBQUksOERBQThEO1FBRWxGLE1BQU0sRUFBRXNCLFFBQVEsRUFBRUMsUUFBUSxFQUFFLEdBQUdqQixJQUFJa0IsSUFBSTtRQUN2Q1AsUUFBUUMsR0FBRyxDQUFDLHFCQUFxQlosSUFBSWtCLElBQUk7UUFFekMsSUFBSSxDQUFDRixZQUFZLENBQUNDLFVBQVU7WUFDMUIsT0FBT2hCLElBQUlPLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLFNBQVM7WUFBMkI7UUFDcEU7UUFFQSxNQUFNUyxlQUFlLE1BQU10QiwyREFBWSxDQUFDO1lBQUV3QixPQUFPO2dCQUFFTDtZQUFTO1FBQUU7UUFDOUQsSUFBSUcsY0FBYztZQUNoQixPQUFPbEIsSUFBSU8sTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsU0FBUztZQUF1QjtRQUNoRTtRQUVBLGlDQUFpQztRQUNqQyxNQUFNWSxpQkFBaUIsTUFBTTNCLG9EQUFXLENBQUNzQixVQUFVO1FBQ25ELE1BQU1PLFVBQVUsTUFBTTNCLDBEQUFXLENBQUM7WUFBRW1CO1lBQVVDLFVBQVVLO1FBQWU7UUFFdkUsc0NBQXNDO1FBQ3RDLE1BQU1JLFFBQVE5Qix3REFBUSxDQUFDO1lBQUVnQyxJQUFJSixRQUFRSSxFQUFFO1lBQUVaLFVBQVVRLFFBQVFSLFFBQVE7UUFBQyxHQUFHSCw4Q0FBc0IsRUFBRTtZQUM3RmdCLFdBQVc7UUFDYjtRQUVBLE9BQU81QixJQUFJTyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLFNBQVM7WUFBZ0NnQjtRQUFNO0lBQy9FLEVBQUUsT0FBT0ksT0FBTztRQUNkbkIsUUFBUW1CLEtBQUssQ0FBQyw4QkFBOEJBO1FBQzVDLE9BQU83QixJQUFJTyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLFNBQVM7UUFBd0I7SUFDakU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsYW5uZXIvLi9wYWdlcy9hcGkvYXV0aC9yZWdpc3Rlci5qcz9jN2IxIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGltcG9ydCBjb3JzIGZyb20gJ2NvcnMnO1xuaW1wb3J0IHsgZGVmYXVsdCBhcyBuZXh0Q29ubmVjdCB9IGZyb20gJ25leHQtY29ubmVjdCc7IC8vIE5hbWVkIGltcG9ydCB0byBhdm9pZCBXZWJwYWNrIGlzc3VlXG5pbXBvcnQgeyBjb25uZWN0REIsIHN5bmNNb2RlbHMgfSBmcm9tICcuLi8uLi8uLi9jb25maWcvZGInO1xuaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHRqcyc7XG5pbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XG5pbXBvcnQgVXNlciBmcm9tICcuLi8uLi8uLi9tb2RlbHMvVXNlcic7XG5cbmNvbnN0IGhhbmRsZXIgPSBuZXh0Q29ubmVjdCgpO1xuaGFuZGxlci51c2UoY29ycygpKTsgLy8gVXNlIENPUlMgbWlkZGxld2FyZVxuY29uc3Qgand0U2VjcmV0ID0gcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB8fCAneW91ci1kZWZhdWx0LXNlY3JldCc7IFxuXG5oYW5kbGVyLnBvc3QoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgLy8gTG9nIEpXVCBTZWNyZXQgdG8gY2hlY2sgaWYgaXQncyBjb3JyZWN0bHkgbG9hZGVkXG4gICAgY29uc29sZS5sb2coJ0pXVCBTZWNyZXQ6JywgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCk7XG5cbiAgICAvLyBUZXN0IHRoZSBkYXRhYmFzZSBjb25uZWN0aW9uIGFuZCBzeW5jaHJvbml6ZSBtb2RlbHNcbiAgICBhd2FpdCBjb25uZWN0REIoKTsgLy8gRW5zdXJlIHRoZSBkYXRhYmFzZSBpcyByZWFjaGFibGVcbiAgICBhd2FpdCBzeW5jTW9kZWxzKCk7IC8vIFN5bmNocm9uaXplIHRoZSBtb2RlbHMgKGNyZWF0ZSB0YWJsZXMgaWYgdGhleSBkbyBub3QgZXhpc3QpXG5cbiAgICBjb25zdCB7IHVzZXJuYW1lLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG4gICAgY29uc29sZS5sb2coJ1JlY2VpdmVkIHJlcXVlc3Q6JywgcmVxLmJvZHkpO1xuXG4gICAgaWYgKCF1c2VybmFtZSB8fCAhcGFzc3dvcmQpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdBbGwgZmllbGRzIGFyZSByZXF1aXJlZC4nIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IHdoZXJlOiB7IHVzZXJuYW1lIH0gfSk7XG4gICAgaWYgKGV4aXN0aW5nVXNlcikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgYWxyZWFkeSBleGlzdHMuJyB9KTtcbiAgICB9XG5cbiAgICAvLyBIYXNoIHRoZSBwYXNzd29yZCB1c2luZyBiY3J5cHRcbiAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCAxMCk7XG4gICAgY29uc3QgbmV3VXNlciA9IGF3YWl0IFVzZXIuY3JlYXRlKHsgdXNlcm5hbWUsIHBhc3N3b3JkOiBoYXNoZWRQYXNzd29yZCB9KTtcblxuICAgIC8vIEdlbmVyYXRlIEpXVCB0b2tlbiBmb3IgdGhlIG5ldyB1c2VyXG4gICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbih7IGlkOiBuZXdVc2VyLmlkLCB1c2VybmFtZTogbmV3VXNlci51c2VybmFtZSB9LCBwcm9jZXNzLmVudi5KV1RfU0VDUkVULCB7XG4gICAgICBleHBpcmVzSW46ICcxaCcsIC8vIFRva2VuIGV4cGlyZXMgaW4gMSBob3VyXG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24oeyBtZXNzYWdlOiAnVXNlciByZWdpc3RlcmVkIHN1Y2Nlc3NmdWxseScsIHRva2VuIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGR1cmluZyByZWdpc3RyYXRpb246JywgZXJyb3IpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xuICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgaGFuZGxlcjsgXG5cbiAqL1xuaW1wb3J0IGNvcnMgZnJvbSAnY29ycyc7XG5pbXBvcnQgeyBjb25uZWN0REIsIHN5bmNNb2RlbHMgfSBmcm9tICcuLi8uLi8uLi9jb25maWcvZGInO1xuaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHRqcyc7XG5pbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XG5pbXBvcnQgVXNlciBmcm9tICcuLi8uLi8uLi9tb2RlbHMvVXNlcic7XG5cbi8vIENPUlMgbWlkZGxld2FyZVxuY29uc3QgY29yc01pZGRsZXdhcmUgPSBjb3JzKCk7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgdHJ5IHtcbiAgICAvLyBIYW5kbGUgdGhlIENPUlMgbWlkZGxld2FyZVxuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvcnNNaWRkbGV3YXJlKHJlcSwgcmVzLCAocmVzdWx0KSA9PiB7XG4gICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgIHJldHVybiByZWplY3QocmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIE9ubHkgaGFuZGxlIFBPU1QgcmVxdWVzdHNcbiAgICBpZiAocmVxLm1ldGhvZCAhPT0gJ1BPU1QnKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBtZXNzYWdlOiAnTWV0aG9kIE5vdCBBbGxvd2VkJyB9KTtcbiAgICB9XG5cbiAgICAvLyBMb2cgSldUIFNlY3JldCB0byBjaGVjayBpZiBpdCdzIGNvcnJlY3RseSBsb2FkZWRcbiAgICBjb25zb2xlLmxvZygnSldUIFNlY3JldDonLCBwcm9jZXNzLmVudi5KV1RfU0VDUkVUKTtcblxuICAgIC8vIFRlc3QgdGhlIGRhdGFiYXNlIGNvbm5lY3Rpb24gYW5kIHN5bmNocm9uaXplIG1vZGVsc1xuICAgIGF3YWl0IGNvbm5lY3REQigpOyAvLyBFbnN1cmUgdGhlIGRhdGFiYXNlIGlzIHJlYWNoYWJsZVxuICAgIGF3YWl0IHN5bmNNb2RlbHMoKTsgLy8gU3luY2hyb25pemUgdGhlIG1vZGVscyAoY3JlYXRlIHRhYmxlcyBpZiB0aGV5IGRvIG5vdCBleGlzdClcblxuICAgIGNvbnN0IHsgdXNlcm5hbWUsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcbiAgICBjb25zb2xlLmxvZygnUmVjZWl2ZWQgcmVxdWVzdDonLCByZXEuYm9keSk7XG5cbiAgICBpZiAoIXVzZXJuYW1lIHx8ICFwYXNzd29yZCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0FsbCBmaWVsZHMgYXJlIHJlcXVpcmVkLicgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgZXhpc3RpbmdVc2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgd2hlcmU6IHsgdXNlcm5hbWUgfSB9KTtcbiAgICBpZiAoZXhpc3RpbmdVc2VyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnVXNlciBhbHJlYWR5IGV4aXN0cy4nIH0pO1xuICAgIH1cblxuICAgIC8vIEhhc2ggdGhlIHBhc3N3b3JkIHVzaW5nIGJjcnlwdFxuICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEwKTtcbiAgICBjb25zdCBuZXdVc2VyID0gYXdhaXQgVXNlci5jcmVhdGUoeyB1c2VybmFtZSwgcGFzc3dvcmQ6IGhhc2hlZFBhc3N3b3JkIH0pO1xuXG4gICAgLy8gR2VuZXJhdGUgSldUIHRva2VuIGZvciB0aGUgbmV3IHVzZXJcbiAgICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKHsgaWQ6IG5ld1VzZXIuaWQsIHVzZXJuYW1lOiBuZXdVc2VyLnVzZXJuYW1lIH0sIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQsIHtcbiAgICAgIGV4cGlyZXNJbjogJzFoJywgLy8gVG9rZW4gZXhwaXJlcyBpbiAxIGhvdXJcbiAgICB9KTtcblxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIHJlZ2lzdGVyZWQgc3VjY2Vzc2Z1bGx5JywgdG9rZW4gfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZHVyaW5nIHJlZ2lzdHJhdGlvbjonLCBlcnJvcik7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gIH1cbn0iXSwibmFtZXMiOlsiY29ycyIsImNvbm5lY3REQiIsInN5bmNNb2RlbHMiLCJiY3J5cHQiLCJqd3QiLCJVc2VyIiwiY29yc01pZGRsZXdhcmUiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJyZXN1bHQiLCJFcnJvciIsIm1ldGhvZCIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwiY29uc29sZSIsImxvZyIsInByb2Nlc3MiLCJlbnYiLCJKV1RfU0VDUkVUIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImJvZHkiLCJleGlzdGluZ1VzZXIiLCJmaW5kT25lIiwid2hlcmUiLCJoYXNoZWRQYXNzd29yZCIsImhhc2giLCJuZXdVc2VyIiwiY3JlYXRlIiwidG9rZW4iLCJzaWduIiwiaWQiLCJleHBpcmVzSW4iLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/auth/register.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fregister&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fauth%2Fregister.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();