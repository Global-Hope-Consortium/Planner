"use strict";(()=>{var e={};e.id=7,e.ids=[7],e.modules={8432:e=>{e.exports=require("bcryptjs")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},496:e=>{e.exports=require("sequelize")},5616:e=>{e.exports=import("next-connect")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},9654:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{config:()=>u,default:()=>c,routeModule:()=>d});var s=r(1802),n=r(7153),o=r(6249),i=r(4093),l=e([i]);i=(l.then?(await l)():l)[0];let c=(0,o.l)(i,"default"),u=(0,o.l)(i,"config"),d=new s.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/auth/register",pathname:"/api/auth/register",bundlePath:"",filename:""},userland:i});a()}catch(e){a(e)}})},2884:(e,t,r)=>{let{Sequelize:a}=r(496),s=new a(process.env.DATABASE_URL,{dialect:"postgres",logging:!1}),n=async()=>{try{await s.authenticate(),console.log("Database connected successfully.")}catch(e){console.error("Unable to connect to the database:",e)}},o=async()=>{try{await s.sync({alter:!0}),console.log("All models were synchronized successfully.")}catch(e){console.error("Error synchronizing models:",e)}};e.exports={sequelize:s,testDBConnection:n,syncModels:o}},1075:(e,t,r)=>{let{DataTypes:a}=r(496),{sequelize:s}=r(2884),n=s.define("User",{username:{type:a.STRING,allowNull:!1,unique:!0},password:{type:a.STRING,allowNull:!1}});e.exports=n},4093:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>p});var s=r(5616),n=r(8432),o=r.n(n),i=r(1075),l=r.n(i),c=r(2884),u=e([s]);s=(u.then?(await u)():u)[0];let d=(0,s.default)();d.post(async(e,t)=>{await (0,c.connectDB)();let{username:r,password:a}=e.body;if(!r||!a)return t.status(400).json({message:"All fields are required."});if(await l().findOne({where:{username:r}}))return t.status(400).json({message:"User already exists."});let s=await o().hash(a,10);await l().create({username:r,password:s}),t.status(201).json({message:"User registered successfully."})});let p=d;a()}catch(e){a(e)}})},7153:(e,t)=>{var r;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(r||(r={}))},1802:(e,t,r)=>{e.exports=r(145)}};var t=require("../../../webpack-api-runtime.js");t.C(e);var r=t(t.s=9654);module.exports=r})();