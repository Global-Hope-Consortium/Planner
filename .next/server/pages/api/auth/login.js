(()=>{var e={};e.id=908,e.ids=[908],e.modules={8432:e=>{"use strict";e.exports=require("bcryptjs")},9344:e=>{"use strict";e.exports=require("jsonwebtoken")},145:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},496:e=>{"use strict";e.exports=require("sequelize")},5616:e=>{"use strict";e.exports=import("next-connect")},6249:(e,t)=>{"use strict";Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},1686:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{config:()=>l,default:()=>u,routeModule:()=>d});var n=r(1802),a=r(7153),i=r(6249),o=r(3531),c=e([o]);o=(c.then?(await c)():c)[0];let u=(0,i.l)(o,"default"),l=(0,i.l)(o,"config"),d=new n.PagesAPIRouteModule({definition:{kind:a.x.PAGES_API,page:"/api/auth/login",pathname:"/api/auth/login",bundlePath:"",filename:""},userland:o});s()}catch(e){s(e)}})},2884:(e,t,r)=>{"use strict";let{Sequelize:s}=r(496),n=new s(process.env.DATABASE_URL,{dialect:"postgres",logging:!1}),a=async()=>{try{await n.authenticate(),console.log("Database connected successfully.")}catch(e){console.error("Unable to connect to the database:",e)}},i=async()=>{try{await n.sync({alter:!0}),console.log("All models were synchronized successfully.")}catch(e){console.error("Error synchronizing models:",e)}};e.exports={sequelize:n,testDBConnection:a,syncModels:i}},926:()=>{},1075:(e,t,r)=>{"use strict";let{DataTypes:s}=r(496),{sequelize:n}=r(2884),a=n.define("User",{username:{type:s.STRING,allowNull:!1,unique:!0},password:{type:s.STRING,allowNull:!1}});e.exports=a},3531:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>y});var n=r(5616),a=r(8432),i=r.n(a),o=r(9344),c=r.n(o),u=r(1075),l=r.n(u),d=r(2884),p=r(926),f=e([n]);n=(f.then?(await f)():f)[0];let P=(0,n.default)();P.post(async(e,t)=>{await (0,d.connectDB)();let{username:r,password:s}=e.body,n=await l().findOne({where:{username:r}});if(!n||!await i().compare(s,n.password))return t.status(401).json({message:"Invalid credentials."});let a=c().sign({id:n.id,username:n.username},p.jwtSecret,{expiresIn:"1h"});t.status(200).json({token:a})});let y=P;s()}catch(e){s(e)}})},7153:(e,t)=>{"use strict";var r;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(r||(r={}))},1802:(e,t,r)=>{"use strict";e.exports=r(145)}};var t=require("../../../webpack-api-runtime.js");t.C(e);var r=t(t.s=1686);module.exports=r})();